{"version":3,"file":"ts-object-builder.js","sources":["../../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../../node_modules/@babel/runtime/helpers/inherits.js","../../node_modules/@babel/runtime/helpers/typeof.js","../../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../../node_modules/@babel/runtime/helpers/getPrototypeOf.js","../../node_modules/@babel/runtime/helpers/classCallCheck.js","../../node_modules/@babel/runtime/helpers/createClass.js","../../node_modules/@babel/runtime/helpers/defineProperty.js","../../src/object-builder.ts"],"sourcesContent":["function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","export class ObjectBuilderBase<T, K extends keyof T> {\r\n    private readonly values: Map<K, (index: number) => T[K]> = new Map<K, (index: number) => T[K]>();\r\n    private readonly fieldsToExclude: Array<(keyof T)> = [];\r\n\r\n    constructor(protected createType: new (arg?: any) => T) {\r\n    }\r\n\r\n    private get fieldsToBuild(): K[] {\r\n        return Array.from(this.values.keys()).filter((f) => this.isNotExcluded(f));\r\n    }\r\n\r\n    private isNotExcluded(field: K): boolean {\r\n        return this.fieldsToExclude.indexOf(field) === -1;\r\n    }\r\n\r\n    private buildForIndex(index: number = 0): T {\r\n      const obj = this.createNewObject();\r\n\r\n      this.fieldsToBuild.forEach((k) => {\r\n          // tslint:disable-next-line:no-non-null-assertion\r\n        obj[k] = this.values.get(k)!(index);\r\n      });\r\n\r\n      return obj;\r\n    }\r\n\r\n    protected createNewObject(): T {\r\n        return new this.createType();\r\n    }\r\n\r\n    with<KType extends K>(name: KType, value: ((index: number) => T[KType]) | T[KType]): this {\r\n        if (typeof value === 'function') {\r\n            this.values.set(name, value as ((index: number) => T[KType]));\r\n        } else {\r\n            this.values.set(name, () => value);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    build(): T {\r\n        return this.buildForIndex(0);\r\n    }\r\n\r\n    buildList(count: number): T[] {\r\n        const list = [];\r\n        for (let i = 0; i < count; i++) {\r\n            list.push(this.buildForIndex(i));\r\n        }\r\n        return list;\r\n    }\r\n\r\n    without(...fieldsToExclude: K[]): this {\r\n        this.fieldsToExclude.push(...fieldsToExclude);\r\n        return this;\r\n    }\r\n}\r\n\r\nexport class ObjectBuilder<T> extends ObjectBuilderBase<T, keyof T> {\r\n}\r\n"],"names":["_typeof","ObjectBuilderBase","createType","Map","field","fieldsToExclude","indexOf","index","obj","createNewObject","fieldsToBuild","forEach","k","values","get","name","value","set","buildForIndex","count","list","i","push","Array","from","keys","filter","f","isNotExcluded","ObjectBuilder"],"mappings":";;;;;;;;;;;;;;;;;;;;;CAAA,SAAS,eAAe,CAAC,CAAC,EAAE,CAAC,EAAE;CAC/B,EAAE,cAAc,GAAG,eAAe,GAAG,MAAM,CAAC,cAAc,IAAI,SAAS,eAAe,CAAC,CAAC,EAAE,CAAC,EAAE;CAC7F,IAAI,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC;CACpB,IAAI,OAAO,CAAC,CAAC;CACb,GAAG,CAAC;AACJ;CACA,EAAE,OAAO,eAAe,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;CAC/B,CAAC;AACD;CACA,cAAc,GAAG,eAAe;;;CCPhC,SAAS,SAAS,CAAC,QAAQ,EAAE,UAAU,EAAE;CACzC,EAAE,IAAI,OAAO,UAAU,KAAK,UAAU,IAAI,UAAU,KAAK,IAAI,EAAE;CAC/D,IAAI,MAAM,IAAI,SAAS,CAAC,oDAAoD,CAAC,CAAC;CAC9E,GAAG;AACH;CACA,EAAE,QAAQ,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,CAAC,UAAU,IAAI,UAAU,CAAC,SAAS,EAAE;CACzE,IAAI,WAAW,EAAE;CACjB,MAAM,KAAK,EAAE,QAAQ;CACrB,MAAM,QAAQ,EAAE,IAAI;CACpB,MAAM,YAAY,EAAE,IAAI;CACxB,KAAK;CACL,GAAG,CAAC,CAAC;CACL,EAAE,IAAI,UAAU,EAAE,cAAc,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;CACvD,CAAC;AACD;CACA,YAAc,GAAG,SAAS;;;CCjB1B,SAAS,OAAO,CAAC,GAAG,EAAE;CACtB,EAAE,yBAAyB,CAAC;AAC5B;CACA,EAAE,IAAI,OAAO,MAAM,KAAK,UAAU,IAAI,OAAO,MAAM,CAAC,QAAQ,KAAK,QAAQ,EAAE;CAC3E,IAAI,cAAc,GAAG,OAAO,GAAG,SAAS,OAAO,CAAC,GAAG,EAAE;CACrD,MAAM,OAAO,OAAO,GAAG,CAAC;CACxB,KAAK,CAAC;CACN,GAAG,MAAM;CACT,IAAI,cAAc,GAAG,OAAO,GAAG,SAAS,OAAO,CAAC,GAAG,EAAE;CACrD,MAAM,OAAO,GAAG,IAAI,OAAO,MAAM,KAAK,UAAU,IAAI,GAAG,CAAC,WAAW,KAAK,MAAM,IAAI,GAAG,KAAK,MAAM,CAAC,SAAS,GAAG,QAAQ,GAAG,OAAO,GAAG,CAAC;CACnI,KAAK,CAAC;CACN,GAAG;AACH;CACA,EAAE,OAAO,OAAO,CAAC,GAAG,CAAC,CAAC;CACtB,CAAC;AACD;CACA,cAAc,GAAG,OAAO;;;CChBxB,SAAS,sBAAsB,CAAC,IAAI,EAAE;CACtC,EAAE,IAAI,IAAI,KAAK,KAAK,CAAC,EAAE;CACvB,IAAI,MAAM,IAAI,cAAc,CAAC,2DAA2D,CAAC,CAAC;CAC1F,GAAG;AACH;CACA,EAAE,OAAO,IAAI,CAAC;CACd,CAAC;AACD;CACA,yBAAc,GAAG,sBAAsB;;CCJvC,SAAS,0BAA0B,CAAC,IAAI,EAAE,IAAI,EAAE;CAChD,EAAE,IAAI,IAAI,KAAKA,SAAO,CAAC,IAAI,CAAC,KAAK,QAAQ,IAAI,OAAO,IAAI,KAAK,UAAU,CAAC,EAAE;CAC1E,IAAI,OAAO,IAAI,CAAC;CAChB,GAAG;AACH;CACA,EAAE,OAAO,qBAAqB,CAAC,IAAI,CAAC,CAAC;CACrC,CAAC;AACD;CACA,6BAAc,GAAG,0BAA0B;;;CCZ3C,SAAS,eAAe,CAAC,CAAC,EAAE;CAC5B,EAAE,cAAc,GAAG,eAAe,GAAG,MAAM,CAAC,cAAc,GAAG,MAAM,CAAC,cAAc,GAAG,SAAS,eAAe,CAAC,CAAC,EAAE;CACjH,IAAI,OAAO,CAAC,CAAC,SAAS,IAAI,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;CACnD,GAAG,CAAC;CACJ,EAAE,OAAO,eAAe,CAAC,CAAC,CAAC,CAAC;CAC5B,CAAC;AACD;CACA,cAAc,GAAG,eAAe;;;CCPhC,SAAS,eAAe,CAAC,QAAQ,EAAE,WAAW,EAAE;CAChD,EAAE,IAAI,EAAE,QAAQ,YAAY,WAAW,CAAC,EAAE;CAC1C,IAAI,MAAM,IAAI,SAAS,CAAC,mCAAmC,CAAC,CAAC;CAC7D,GAAG;CACH,CAAC;AACD;CACA,kBAAc,GAAG,eAAe;;CCNhC,SAAS,iBAAiB,CAAC,MAAM,EAAE,KAAK,EAAE;CAC1C,EAAE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;CACzC,IAAI,IAAI,UAAU,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;CAC9B,IAAI,UAAU,CAAC,UAAU,GAAG,UAAU,CAAC,UAAU,IAAI,KAAK,CAAC;CAC3D,IAAI,UAAU,CAAC,YAAY,GAAG,IAAI,CAAC;CACnC,IAAI,IAAI,OAAO,IAAI,UAAU,EAAE,UAAU,CAAC,QAAQ,GAAG,IAAI,CAAC;CAC1D,IAAI,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,UAAU,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;CAC9D,GAAG;CACH,CAAC;AACD;CACA,SAAS,YAAY,CAAC,WAAW,EAAE,UAAU,EAAE,WAAW,EAAE;CAC5D,EAAE,IAAI,UAAU,EAAE,iBAAiB,CAAC,WAAW,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;CACvE,EAAE,IAAI,WAAW,EAAE,iBAAiB,CAAC,WAAW,EAAE,WAAW,CAAC,CAAC;CAC/D,EAAE,OAAO,WAAW,CAAC;CACrB,CAAC;AACD;CACA,eAAc,GAAG,YAAY;;CChB7B,SAAS,eAAe,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE;CAC1C,EAAE,IAAI,GAAG,IAAI,GAAG,EAAE;CAClB,IAAI,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,GAAG,EAAE;CACpC,MAAM,KAAK,EAAE,KAAK;CAClB,MAAM,UAAU,EAAE,IAAI;CACtB,MAAM,YAAY,EAAE,IAAI;CACxB,MAAM,QAAQ,EAAE,IAAI;CACpB,KAAK,CAAC,CAAC;CACP,GAAG,MAAM;CACT,IAAI,GAAG,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;CACrB,GAAG;AACH;CACA,EAAE,OAAO,GAAG,CAAC;CACb,CAAC;AACD;CACA,kBAAc,GAAG,eAAe;;;;;;KCfnBC,iBAAb;CAII,6BAAsBC,UAAtB,EAAwD;CAAA;;CAAA,SAAlCA,UAAkC,GAAlCA,UAAkC;;CAAA,mCAHG,IAAIC,GAAJ,EAGH;;CAAA,4CAFH,EAEG;CACvD;;CALL;CAAA;CAAA,kCAW0BC,KAX1B,EAW6C;CACrC,aAAO,KAAKC,eAAL,CAAqBC,OAArB,CAA6BF,KAA7B,MAAwC,CAAC,CAAhD;CACH;CAbL;CAAA;CAAA,oCAegD;CAAA;;CAAA,UAAtBG,KAAsB,uEAAN,CAAM;CAC1C,UAAMC,GAAG,GAAG,KAAKC,eAAL,EAAZ;CAEA,WAAKC,aAAL,CAAmBC,OAAnB,CAA2B,UAACC,CAAD,EAAO;CAC9B;CACFJ,QAAAA,GAAG,CAACI,CAAD,CAAH,GAAS,KAAI,CAACC,MAAL,CAAYC,GAAZ,CAAgBF,CAAhB,EAAoBL,KAApB,CAAT;CACD,OAHD;CAKA,aAAOC,GAAP;CACD;CAxBL;CAAA;CAAA,sCA0BmC;CAC3B,aAAO,IAAI,KAAKN,UAAT,EAAP;CACH;CA5BL;CAAA;CAAA,0BA8B0Ba,IA9B1B,EA8BuCC,KA9BvC,EA8B8F;CACtF,UAAI,OAAOA,KAAP,KAAiB,UAArB,EAAiC;CAC7B,aAAKH,MAAL,CAAYI,GAAZ,CAAgBF,IAAhB,EAAsBC,KAAtB;CACH,OAFD,MAEO;CACH,aAAKH,MAAL,CAAYI,GAAZ,CAAgBF,IAAhB,EAAsB;CAAA,iBAAMC,KAAN;CAAA,SAAtB;CACH;;CACD,aAAO,IAAP;CACH;CArCL;CAAA;CAAA,4BAuCe;CACP,aAAO,KAAKE,aAAL,CAAmB,CAAnB,CAAP;CACH;CAzCL;CAAA;CAAA,8BA2CcC,KA3Cd,EA2CkC;CAC1B,UAAMC,IAAI,GAAG,EAAb;;CACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,KAApB,EAA2BE,CAAC,EAA5B,EAAgC;CAC5BD,QAAAA,IAAI,CAACE,IAAL,CAAU,KAAKJ,aAAL,CAAmBG,CAAnB,CAAV;CACH;;CACD,aAAOD,IAAP;CACH;CAjDL;CAAA;CAAA,8BAmD2C;CAAA;;CACnC,oCAAKf,eAAL,EAAqBiB,IAArB;;CACA,aAAO,IAAP;CACH;CAtDL;CAAA;CAAA,wBAOqC;CAAA;;CAC7B,aAAOC,KAAK,CAACC,IAAN,CAAW,KAAKX,MAAL,CAAYY,IAAZ,EAAX,EAA+BC,MAA/B,CAAsC,UAACC,CAAD;CAAA,eAAO,MAAI,CAACC,aAAL,CAAmBD,CAAnB,CAAP;CAAA,OAAtC,CAAP;CACH;CATL;;CAAA;CAAA;KAyDaE,aAAb;CAAA;;CAAA;;CAAA;CAAA;;CAAA;CAAA;;CAAA;CAAA,EAAsC5B,iBAAtC;;;;;;;;;;;;"}