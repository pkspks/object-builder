{"version":3,"file":"ts-object-builder.mjs","sources":["../../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../../node_modules/@babel/runtime/helpers/inherits.js","../../node_modules/@babel/runtime/helpers/typeof.js","../../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../../node_modules/@babel/runtime/helpers/getPrototypeOf.js","../../node_modules/@babel/runtime/helpers/classCallCheck.js","../../node_modules/@babel/runtime/helpers/createClass.js","../../node_modules/@babel/runtime/helpers/defineProperty.js","../../src/object-builder.ts"],"sourcesContent":["function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","export class ObjectBuilderBase<T, K extends keyof T> {\r\n    private readonly values: Map<K, (index: number) => T[K]> = new Map<K, (index: number) => T[K]>();\r\n    private readonly fieldsToExclude: Array<(keyof T)> = [];\r\n\r\n    constructor(protected createType: new (arg?: any) => T) {\r\n    }\r\n\r\n    private get fieldsToBuild(): K[] {\r\n        return Array.from(this.values.keys()).filter((f) => this.isNotExcluded(f));\r\n    }\r\n\r\n    private isNotExcluded(field: K): boolean {\r\n        return this.fieldsToExclude.indexOf(field) === -1;\r\n    }\r\n\r\n    private buildForIndex(index: number = 0): T {\r\n      const obj = this.createNewObject();\r\n\r\n      this.fieldsToBuild.forEach((k) => {\r\n          // tslint:disable-next-line:no-non-null-assertion\r\n        obj[k] = this.values.get(k)!(index);\r\n      });\r\n\r\n      return obj;\r\n    }\r\n\r\n    protected createNewObject(): T {\r\n        return new this.createType();\r\n    }\r\n\r\n    with<KType extends K>(name: KType, value: ((index: number) => T[KType]) | T[KType]): this {\r\n        if (typeof value === 'function') {\r\n            this.values.set(name, value as ((index: number) => T[KType]));\r\n        } else {\r\n            this.values.set(name, () => value);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    build(): T {\r\n        return this.buildForIndex(0);\r\n    }\r\n\r\n    buildList(count: number): T[] {\r\n        const list = [];\r\n        for (let i = 0; i < count; i++) {\r\n            list.push(this.buildForIndex(i));\r\n        }\r\n        return list;\r\n    }\r\n\r\n    without(...fieldsToExclude: K[]): this {\r\n        this.fieldsToExclude.push(...fieldsToExclude);\r\n        return this;\r\n    }\r\n}\r\n\r\nexport class ObjectBuilder<T> extends ObjectBuilderBase<T, keyof T> {\r\n}\r\n"],"names":["_typeof","ObjectBuilderBase","createType","Map","field","fieldsToExclude","indexOf","index","obj","createNewObject","fieldsToBuild","forEach","k","values","get","name","value","set","buildForIndex","count","list","i","push","Array","from","keys","filter","f","isNotExcluded","ObjectBuilder"],"mappings":"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"}